<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Maxer Mes Stats - Physique</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #1e0f16;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 700px;
      margin: 0 auto;
      padding: 16px 2vw 50px 2vw;
    }
    h1 {
      text-align: center;
      color: #B71C3A;
      margin-top: 24px;
      font-size: 2.2em;
      letter-spacing: 2px;
      font-weight: 800;
    }
    .return-btn {
      display: block;
      margin: 18px auto 12px auto;
      background: #3e2233;
      color: #ffc107;
      padding: 12px 22px;
      border-radius: 16px;
      font-weight: bold;
      font-size: 1em;
      border: none;
      cursor: pointer;
      max-width: 200px;
      width: 90vw;
      text-align: center;
      outline: none;
      box-shadow: 0 0 14px #ffcf57, 0 0 30px #ffcf5720;
      transition: background 0.18s, box-shadow 0.18s;
    }
    .return-btn:hover {
      background: #5c2741;
      box-shadow: 0 0 18px #ffd74d, 0 0 34px #ffeb3b70;
    }
    .cat-section {
      margin-top: 34px;
      background: #331b26bb;
      border-radius: 16px;
      box-shadow: 0 0 12px #b71c3a33;
      padding-bottom: 10px;
    }
    .cat-title {
      font-size: 1.5em;
      padding: 18px 0 6px 14px;
      font-weight: 800;
      letter-spacing: 2px;
      text-shadow: 0 2px 16px #b71c3a55;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    table {
      width: 100%;
      margin: 10px 0 0 0;
      border-collapse: separate;
      border-spacing: 0;
    }
    th, td {
      padding: 12px 5px;
      text-align: center;
      font-size: 1.01em;
    }
    th {
      background: #B71C3A;
      color: #fff;
      font-weight: bold;
      font-size: 1em;
      letter-spacing: 1px;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
    td {
      background: #2c1621cc;
      border-bottom: 1.5px solid #b71c3a33;
      vertical-align: middle;
      font-weight: bold;
    }
    tr:last-child td { border-bottom: none; }
    .input-cell {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }
    input[type=number] {
      width: 68px;
      padding: 6px 7px;
      border-radius: 6px;
      border: 1.4px solid #B71C3A;
      background: #fff;
      color: #B71C3A;
      font-size: 1em;
      font-weight: bold;
      outline: none;
      transition: border 0.2s;
    }
    input[type=number]::placeholder {
      font-style: italic;
      color: #B71C3A99;
      opacity: 0.6;
      font-weight: 600;
    }
    .lvl-cell {
      font-size: 1.08em;
      font-weight: bold;
      letter-spacing: 1px;
      transition: color 0.3s;
    }
    .progress-bar-container {
      width: 76px;
      height: 18px;
      background: #544055;
      border-radius: 10px;
      margin: auto;
      overflow: hidden;
      border: 1.5px solid #b71c3a;
      position: relative;
      box-shadow: 0 1px 8px #0002;
    }
    .progress-bar {
      height: 100%;
      border-radius: 10px;
      transition: width 0.33s, background 0.33s;
      min-width: 5px;
    }
    .bar-grey { background: #bcbcbc; }
    .bar-green { background: #84ffb1; }
    .bar-darkgreen { background: #3be57c; }
    .bar-purple { background: #b76eff; }
    .bar-gold { background: #ffd700; }
    .lvl-grey { color: #bcbcbc; }
    .lvl-green { color: #84ffb1; }
    .lvl-darkgreen { color: #3be57c; }
    .lvl-purple { color: #b76eff; }
    .lvl-gold { color: #ffd700; }
    .small-italic {
      display: block;
      font-size: 0.85em;
      font-style: italic;
      opacity: 0.65;
      margin-top: 2px;
    }
    .motivation {
      display: block;
      font-size: 1em;
      margin-top: 5px;
      margin-bottom: 2px;
      font-weight: 600;
    }
    .motivation span {
      font-size: 0.89em;
      font-style: italic;
      opacity: 0.8;
    }
    .neon-btn {
      box-shadow: 0 0 14px #ffcf57, 0 0 30px #ffcf5720;
      transition: background 0.22s, box-shadow 0.22s;
    }
    .neon-btn:hover {
      box-shadow: 0 0 18px #ffd74d, 0 0 34px #ffeb3b70;
    }
    @media (max-width: 700px) {
      .container { max-width: 100vw; padding: 6px 0 60px 0; }
      h1 { font-size: 1.35em; }
      .cat-title { font-size: 1.08em; }
      th, td { font-size: 0.94em; padding: 7px 3px;}
      input[type=number] { width: 52px; padding: 5px 2px;}
      .progress-bar-container { width: 50px; height: 13px;}
      .return-btn { max-width: 95vw; padding: 12px 0; }
    }
    .actions {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin: 30px 0 10px 0;
      flex-wrap: wrap;
    }
    button {
      background: #B71C3A;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 8px 17px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 10px #ffcf57, 0 0 22px #ffcf5720;
      transition: background 0.22s, box-shadow 0.22s;
    }
    button:hover {
      background: #881329;
      box-shadow: 0 0 18px #ffd74d, 0 0 34px #ffeb3b70;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="return-btn neon-btn" onclick="window.history.back();">‚Üê Retour</button>
    <h1>üéÆ Maxer Mes Stats - Physique</h1>
    <div id="sections"></div>
    <div class="actions">
      <button class="neon-btn" onclick="copyNotion()">üìã Copier Notion</button>
      <button class="neon-btn" onclick="copyNotes()">üóíÔ∏è Copier Notes (moche)</button>
    </div>
  </div>
  <script>
    const MAX_LVL = 150; // Barre pleine √† 150
    const categories = [
      {
        emoji: "üí™", titre: "FORCE", color: "#E53935", exos: [
          { nom: "Bench", placeholder: "ex: 80", unite: "kg", n0: 50, n150: 120, type: "plus" },
          { nom: "Squat", placeholder: "ex: 110", unite: "kg", n0: 50, n150: 160, type: "plus" },
          { nom: "Deadlift", placeholder: "ex: 120", unite: "kg", n0: 50, n150: 180, type: "plus" },
          { nom: "Tractions lest√©es", placeholder: "ex: 40", unite: "kg", n0: 0, n150: 55, type: "plus" },
          { nom: "Dips lest√©es", placeholder: "ex: 50", unite: "kg", n0: 0, n150: 65, type: "plus" },
          { nom: "Muscle up", placeholder: "ex: 10", unite: "reps", n0: 1, n150: 15, type: "plus", start: 10 },
          { nom: "Handstand push-ups", placeholder: "ex: 6", unite: "reps", n0: 0, n150: 15, type: "plus" }
        ]
      },
      {
        emoji: "ü´Å", titre: "ENDURANCE", color: "#43A047", exos: [
          { nom: "5 km", placeholder: "ex: 22", unite: "min", n0: 30, n150: 22, type: "moins" },
          { nom: "10 km", placeholder: "ex: 45", unite: "min", n0: 60, n150: 45, type: "moins" },
          { nom: "21 km", placeholder: "ex: 90", unite: "min", n0: 120, n150: 90, type: "moins" },
          { nom: "42 km", placeholder: "ex: 160", unite: "min", n0: 180, n150: 140, type: "moins" },
          { nom: "Pompes", placeholder: "ex: 70", unite: "reps", n0: 0, n150: 90, type: "plus" },
          { nom: "Tractions", placeholder: "ex: 15", unite: "reps", n0: 0, n150: 20, type: "plus" },
          { nom: "Dips", placeholder: "ex: 15", unite: "reps", n0: 10, n150: 30, type: "plus" }
        ]
      },
      {
        emoji: "üí®", titre: "VITESSE", color: "#FFA726", exos: [
          { nom: "100 m", placeholder: "ex: 15", unite: "sec", n0: 18, n150: 14, type: "moins" },
          { nom: "200 m", placeholder: "ex: 29", unite: "sec", n0: 36, n150: 28, type: "moins" }
        ]
      }
    ];

    function createSection(cat) {
      let html = `<div class="cat-section"><div class="cat-title">${cat.emoji} <span style="color:${cat.color}">${cat.titre}</span></div><table><tr>
        <th>Exercice</th>
        <th>Ta performance</th>
        <th>Niveau</th>
        <th>Progression</th>
      </tr>`;
      cat.exos.forEach((exo, i) => {
        let id = `${cat.titre.toLowerCase()}-${i}`;
        html += `<tr>
          <td style="font-weight: bold;">${exo.nom}</td>
          <td class="input-cell">
            <input type="number" min="0" step="any" id="perf-${id}" placeholder="${exo.placeholder}" 
              oninput="calcLvl('${cat.titre}',${i})">
            <span style="margin-left:4px;font-size:0.99em;color:#f5e8e8; font-style:italic;">${exo.unite}</span>
          </td>
          <td id="lvl-${id}" class="lvl-cell lvl-grey" style="font-weight: bold;">lvl ?</td>
          <td>
            <div class="progress-bar-container"><div id="bar-${id}" class="progress-bar bar-grey" style="width:0%"></div></div>
            <span id="palier-${id}" class="small-italic"></span>
          </td>
        </tr>
        <tr>
          <td colspan="4"><span id="motivation-${id}" class="motivation"></span></td>
        </tr>`;
      });
      html += "</table></div>";
      return html;
    }
    document.getElementById("sections").innerHTML = categories.map(createSection).join("");

    function calcLvl(catName, exoIdx) {
      const cat = categories.find(c => c.titre === catName);
      const exo = cat.exos[exoIdx];
      const id = `${cat.titre.toLowerCase()}-${exoIdx}`;
      const input = document.getElementById(`perf-${id}`);
      let perf = parseFloat(input.value.replace(',', '.'));
      let lvl = "?", percent = 0, bar = "bar-grey", color = "lvl-grey";
      let message = "", small = "";
      let palierText = "";
      palierText = `lvl 150 = ${exo.n150} ${exo.unite}`;
      if (isNaN(perf) || perf === 0) {
        lvl = "?";
        percent = 0;
        bar = "bar-grey";
        color = "lvl-grey";
        message = "";
      } else {
        if (exo.type === "plus") {
          lvl = Math.round(((perf - exo.n0) / (exo.n150 - exo.n0)) * MAX_LVL);
        } else {
          lvl = Math.round(((exo.n0 - perf) / (exo.n0 - exo.n150)) * MAX_LVL);
        }
        if (exo.start) lvl = Math.max(lvl, exo.start);
        if (lvl < 0) lvl = 0;
        if (lvl > MAX_LVL) lvl = MAX_LVL;
        percent = (lvl / MAX_LVL) * 100;

        // Couleur de la barre/texte
        if (lvl === "?" || lvl == 0) {
          bar = "bar-grey"; color = "lvl-grey";
        } else if (lvl <= 30) {
          bar = "bar-green"; color = "lvl-green";
        } else if (lvl <= 50) {
          bar = "bar-darkgreen"; color = "lvl-darkgreen";
        } else if (lvl <= 100) {
          bar = "bar-purple"; color = "lvl-purple";
        } else {
          bar = "bar-gold"; color = "lvl-gold";
        }

        // Petites phrases motiv
        if (lvl <= 30) message = "<span style='color:#84ffb1;'>üö¶ Ce n'est que le d√©but !</span>";
        else if (lvl <= 50) message = "<span style='color:#3be57c;'>üîù Incroyable d√©j√† !</span>";
        else if (lvl <= 100) message = "<span style='color:#b76eff;'>‚ö° Meilleur que la plupart !</span>";
        else message = "<span style='color:#ffd700;'>üëπ Un putain de monstre !</span>";
        if (lvl > 100) message += "<br><span class='small-italic'>va tout de suite flex sur le Discord, le lien est en bio</span>";
      }
      document.getElementById(`lvl-${id}`).innerHTML = `<span class='${color}'>lvl ${lvl}</span>`;
      document.getElementById(`bar-${id}`).className = `progress-bar ${bar}`;
      document.getElementById(`bar-${id}`).style.width = percent + "%";
      document.getElementById(`palier-${id}`).innerHTML = palierText;
      document.getElementById(`motivation-${id}`).innerHTML = message;
    }
    window.calcLvl = calcLvl;

    // Barre emoji Notion
    function emojiBar(percent) {
      let filled = Math.round(percent / 10);
      let empty = 10 - filled;
      if (percent === 0) return "‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú";
      if (percent <= 33) return "üü©".repeat(filled) + "‚¨ú".repeat(empty);
      if (percent <= 66) return "üü©".repeat(filled) + "‚¨ú".repeat(empty);
      if (percent <= 90) return "üü™".repeat(filled) + "‚¨ú".repeat(empty);
      return "üü®".repeat(filled) + "‚¨ú".repeat(empty);
    }

    // Copier Notion avec total
    function notionExport() {
      let total = 0;
      let out = "";
      categories.forEach(cat => {
        cat.exos.forEach((exo, i) => {
          const id = `${cat.titre.toLowerCase()}-${i}`;
          let lvlTxt = document.getElementById(`lvl-${id}`).innerText.trim();
          let val = parseInt(lvlTxt.replace("lvl", "").replace("?", "0"));
          if (!isNaN(val)) total += val;
        });
      });
      out += `LVL TOTAL PHYSIQUE : ${total}\n\n`;
      categories.forEach(cat => {
        out += `${cat.emoji} ${cat.titre}\n`;
        cat.exos.forEach((exo, i) => {
          const id = `${cat.titre.toLowerCase()}-${i}`;
          let val = document.getElementById(`perf-${id}`).value;
          let lvlTxt = document.getElementById(`lvl-${id}`).innerText.trim();
          let barPercent = parseInt(document.getElementById(`bar-${id}`).style.width) || 0;
          let bar = emojiBar(barPercent);
          let detail = "";
          if (exo.nom === "Handstand push-ups" && lvlTxt.includes("lvl") && parseInt(lvlTxt.split(" ")[1]) <= 30) {
            detail = "Pour parvenir √† un handstand push-up il te faut :\nLvl 0 : tenir sur les mains avec mur\nLvl 1 : se d√©coller 5 sec du mur\nLvl 2 : 10 sec\nLvl 3 : 15 sec\nLvl 4 : frog stand 10 sec\n---\nLvl 10 : sans mur 10 sec\n";
          }
          if (exo.nom === "Muscle up" && lvlTxt.includes("lvl") && parseInt(lvlTxt.split(" ")[1]) <= 10) {
            detail = "Pour parvenir √† un muscle up il te faut :\nLvl 0 : mal fait - un bras apr√®s l‚Äôautre\nLvl 5 : mal fait - deux bras avec aide des jambes\n---\nLvl 10 : 1 clean\n";
          }
          out += `- ${exo.nom} (${val ? val : "?"} ${exo.unite}) ‚Äî ${lvlTxt}\n  Progression : ${bar}\n${detail ? detail : ""}`;
        });
        out += "\n";
      });
      return out;
    }
    function notesBar(percent) {
      let filled = Math.round(percent / 10);
      let empty = 10 - filled;
      return "[" + "#".repeat(filled) + " ".repeat(empty) + `] ${Math.round(percent)}%`;
    }
    function notesExport() {
      let out = "";
      categories.forEach(cat => {
        out += `${cat.emoji} ${cat.titre}\n`;
        cat.exos.forEach((exo, i) => {
          const id = `${cat.titre.toLowerCase()}-${i}`;
          let val = document.getElementById(`perf-${id}`).value;
          let lvlTxt = document.getElementById(`lvl-${id}`).innerText.trim();
          let barPercent = parseInt(document.getElementById(`bar-${id}`).style.width) || 0;
          let bar = notesBar(barPercent);
          out += ` - ${exo.nom} (${val ? val : "?"} ${exo.unite}) : ${lvlTxt} ${bar}\n`;
        });
        out += "\n";
      });
      return out;
    }
    function copyNotion() {
      navigator.clipboard.writeText(notionExport());
      alert("‚ú® Copi√© au format Notion ! Va dans une page Notion et colle avec Ctrl+V üëå");
    }
    function copyNotes() {
      navigator.clipboard.writeText(notesExport());
      alert("Donn√©es copi√©es dans le presse-papier !");
    }
  </script>
</body>
</html>
